/*
---
description: With mBox.Notice you can show little notices to your visitors.

authors: Stephan Wagner

license: MIT-style

requires:
 - mBox
 - core/1.4.5: '*'
 - more/Element.Measure

provides: [mBox.Notice]

documentation: http://htmltweaks.com/mBox/Documentation/Notice
...
*/
mBox.Notice=new Class({Extends:mBox,options:{type:"Default",position:{x:["left","inside"],y:["bottom","inside"]},offset:{x:30,y:30},fixed:true,move:true,moveDuration:500,delayClose:4e3,fade:true,fadeDuration:{open:250,close:400},target:$(window),zIndex:1e6,closeOnEsc:false,closeOnBoxClick:true,closeOnBodyClick:false,openOnInit:true},initialize:function(e){this.defaultInOut="inside";this.defaultTheme="Notice";e.onSystemBoxReady=function(){this.container.addClass("mBoxNotice"+(this.options.type.capitalize()||"Default"));if(this.options.move&&(this.position.x[1]=="inside"||this.position.x[0]=="center")&&this.position.y[1]=="inside"&&(this.position.y[0]=="top"||this.position.y[0]=="bottom")){var e=this.wrapper.getDimensions({computeSize:true});this.container.setStyle("position","absolute");this.container.setStyle(this.position.y[0]=="top"?"bottom":"top",0);this.wrapper.setStyles({height:0,width:e.totalWidth,overflowY:"hidden"});this.options.transition={open:{transition:"linear",property:"height",duration:this.options.moveDuration,start:0,end:e.totalHeight+this.options.offset.y}};this.options.offset.y=0;this.options.delayClose+=this.options.moveDuration}};e.onSystemOpen=function(){if($(window).retrieve("mBoxNotice")){$(window).retrieve("mBoxNotice").ignoreDelay=true;$(window).retrieve("mBoxNotice").close()}$(window).store("mBoxNotice",this)};e.onSystemOpenComplete=function(){this.close()};e.onSystemCloseComplete=function(){this.destroy()};this.parent(e)}})